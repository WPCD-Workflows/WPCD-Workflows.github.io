<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. Turbulence with synthetic diagnostics workflows &mdash; EUROfusion Integrated Modelling workflows 3.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="7. Codes" href="codes.html" />
    <link rel="prev" title="5. The EQRECONSTRUCT workflow" href="eqreconstr.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> EUROfusion Integrated Modelling workflows
            <img src="_static/wpcd_banner_new.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction to the EUROfusion Project Code Development for integrated modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure.html">2. Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="ets.html">3. European Transport Simulator (ETS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="es.html">4. Equilibrium and MHD Stability workflow (EQSTABIL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="eqreconstr.html">5. The EQRECONSTRUCT workflow</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. Turbulence with synthetic diagnostics workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hesel-documentation">6.1. HESEL Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hesel-as-stand-alone">6.1.1. HESEL as stand-alone</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#obtaining-and-building-hesel">6.1.1.1. Obtaining and building HESEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hesel-input">6.1.1.2. HESEL input</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hesel-code-structure">6.1.1.3. HESEL code structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-a-hesel-simulation">6.1.1.4. Running a HESEL simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hesel-output">6.1.1.5. HESEL output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hesel-as-an-actor">6.1.2. HESEL as an actor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hesel-in-the-kepler-workflow">6.1.3. HESEL in the KEPLER workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#renate-documentation">6.2. RENATE Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="codes.html">7. Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">8. Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="amns.html">9. AMNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">10. Additional resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EUROfusion Integrated Modelling workflows</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">6. </span>Turbulence with synthetic diagnostics workflows</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/WPCD-Workflows/documentation/blob/master/source/turbulence.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="turbulence-with-synthetic-diagnostics-workflows">
<h1><span class="section-number">6. </span>Turbulence with synthetic diagnostics workflows<a class="headerlink" href="#turbulence-with-synthetic-diagnostics-workflows" title="Permalink to this headline"></a></h1>
<p>The turbulence with synthetic diagnostics workflows consist of the HESEL and RENATE actors for turbulence simulation and synthetic diagnostics.</p>
<section id="hesel-documentation">
<h2><span class="section-number">6.1. </span>HESEL Documentation<a class="headerlink" href="#hesel-documentation" title="Permalink to this headline"></a></h2>
<p>The HESEL code is a numerical solver for the set of equations that describe the HESEL model. The HESEL model is a drift-reduced Braginskii type of two-fluid model for electron density, electron and ion pressures, and E-cross-B vorticity of a quasi-neutral plasma. The domain is a 2D slab perpendicular to the magnetic field line located at the outboard-midplane of a tokamak. The slab domain covers parts of the turbulent edge and SOL regions.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 46%" />
<col style="width: 54%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_location.png" src="_images/hesel_location.png" />
</td>
<td><img alt="_images/hesel_domain.png" src="_images/hesel_domain.png" />
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>The HESEL 2D slab domain. Images from A.H. Nielsen <em>et al 2019 Nucl. Fusion</em> <strong>59</strong> 086059.</p></td>
</tr>
</tbody>
</table>
<p>The solutions typically show the development of filaments (blobs) near the last-closed-flux-surface. The filaments propagate radially outwards through the SOL region, and carry heat and paticles away from the confined edge region.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_simulation.png" src="_images/hesel_simulation.png" />
</td>
</tr>
<tr class="row-even"><td><p>Snapshot of solution fields for HESEL simulation</p></td>
</tr>
</tbody>
</table>
<p>There are plenty of publications in scientific journals based on HESEL (and its precessor ESEL) simulation data, in which the model equations are also described in detail. Below is listed a selected set of publications:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://doi.org/10.1063/1.5083063">Study of power width scaling in scrape-off layer with 2D electrostatic turbulence code based on EAST L-mode discharges</a></p></li>
<li><p><a class="reference external" href="https://doi.org/10.1088/1741-4326/ab1954">Synthetic Edge and SOL Diagnostics: A Bridge between Experiments and Theory</a></p></li>
<li><p><a class="reference external" href="https://doi.org/10.1063/1.4985329">ExB mean flows in finite ion temperature plasmas</a></p></li>
<li><p><a class="reference external" href="https://doi.org/10.1088/1361-6587/59/2/025012">Numerical simulations of blobs with ion dynamics</a></p></li>
</ul>
<p>The HESEL code structure and how to run it as a stand alone code is described in <a class="reference internal" href="#hesel-as-stand-alone"><span class="std std-ref">HESEL as stand-alone</span></a>, the workflow wrapper documentation is described in <a class="reference internal" href="#hesel-as-an-actor"><span class="std std-ref">HESEL as an actor</span></a>, and a guide on how to include HESEL in the KEPLER workflow is given in <a class="reference internal" href="#hesel-in-the-kepler-workflow"><span class="std std-ref">HESEL in the KEPLER workflow</span></a>.</p>
<section id="hesel-as-stand-alone">
<span id="id1"></span><h3><span class="section-number">6.1.1. </span>HESEL as stand-alone<a class="headerlink" href="#hesel-as-stand-alone" title="Permalink to this headline"></a></h3>
<p>HESEL can be run outside the workflow as a stand-alone code, where input are read from an input file and, optionally, from experimental data profiles. The output data are stored in a HDF5 datafile.</p>
<section id="obtaining-and-building-hesel">
<h4><span class="section-number">6.1.1.1. </span>Obtaining and building HESEL<a class="headerlink" href="#obtaining-and-building-hesel" title="Permalink to this headline"></a></h4>
<p>The HESEL source code is currenty maintained in a private Github repository (C-HESEL). For obtaining the source code please request access from <a class="reference external" href="mailto:ahnie&#37;&#52;&#48;fysik&#46;dtu&#46;dk">ahnie<span>&#64;</span>fysik<span>&#46;</span>dtu<span>&#46;</span>dk</a>.</p>
<p>The following recipe describes how to load and build HESEL on the EUROfusion Gateway infrastructure.</p>
<p>On the Gateway first make sure the required modules are loaded. This can be assured by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">purge</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">cineca</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">imasenv</span>
<span class="n">imasdb</span> <span class="n">AUG</span>
<span class="n">module</span> <span class="n">unload</span> <span class="n">hdf5</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">hdf5</span><span class="o">/</span><span class="mf">1.8.17</span><span class="o">--</span><span class="n">intelmpi</span><span class="o">--</span><span class="mi">2017</span><span class="o">--</span><span class="n">binary</span>
</pre></div>
</div>
<p>For future convenience the above code block can be added to the <cite>~/.login</cite> file and, if it does not load upon login, executed by <code class="code docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.login</span></code>.</p>
<p>Navigate to your Gateway public directory <code class="code docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/public</span></code> and clone the C-HESEL repository from GitHub</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">PPFE</span><span class="o">-</span><span class="n">Turbulence</span><span class="o">/</span><span class="n">C</span><span class="o">-</span><span class="n">HESEL</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Navigate into the C-HESEL directory <code class="code docutils literal notranslate"><span class="pre">cd</span> <span class="pre">C-HESEL</span></code> and checkout the <cite>develop</cite> branch to work with the most recent updates</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">develop</span>
</pre></div>
</div>
<p>Navigate into the FUTILS source directory <code class="code docutils literal notranslate"><span class="pre">cd</span> <span class="pre">FUTILS_version2.2/src</span></code> and return</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">clean</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="o">-</span><span class="n">f</span> <span class="n">Makefile</span><span class="o">.</span><span class="n">gateway</span>
</pre></div>
</div>
<p>Navigate back to C-HESEL <code class="code docutils literal notranslate"><span class="pre">cd</span> <span class="pre">../..</span></code> and return</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">clean</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">esel</span>
</pre></div>
</div>
<p>Everything is now set up for you to run HESEL, which is located in <cite>C-HESEL/bin/esel.marconi.A3</cite>.</p>
</section>
<section id="hesel-input">
<span id="id2"></span><h4><span class="section-number">6.1.1.2. </span>HESEL input<a class="headerlink" href="#hesel-input" title="Permalink to this headline"></a></h4>
<p>The stand-alone version of HESEL can be run either entirely from an input file, or in a setup where the initial density and temperature fields are read from an additional datafile. The probe positions for synthetic diagnogstics probes are provided in a separate datafile. All input files must be  located in the same directory.</p>
<section id="id3">
<h5><span class="section-number">6.1.1.2.1. </span>HESEL input<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h5>
<p>The HESEL input is read from a plain text file, with the input variables separated by line breaks. An example of an input file is given  <a class="reference download internal" download="" href="_downloads/93ab1de2e26bb2d5ad5405f6d4c09df5/hesel_input"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>. The main variables are</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Decription</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>codenametype</p></td>
<td></td>
<td><p>Machine identifier</p></td>
</tr>
<tr class="row-odd"><td><p>shot_no</p></td>
<td></td>
<td><p>Experiment shot number</p></td>
</tr>
<tr class="row-even"><td><p>run_no</p></td>
<td></td>
<td><p>Simulation run number</p></td>
</tr>
<tr class="row-odd"><td><p>nx</p></td>
<td></td>
<td><p>Number of spatial grid points in x direction</p></td>
</tr>
<tr class="row-even"><td><p>ny</p></td>
<td></td>
<td><p>Number of spatial grid points in y direction</p></td>
</tr>
<tr class="row-odd"><td><p>xmin</p></td>
<td><p>rhos</p></td>
<td><p>Minimum x-axis limit</p></td>
</tr>
<tr class="row-even"><td><p>xmax</p></td>
<td><p>rhos</p></td>
<td><p>Maximum x-axis limit</p></td>
</tr>
<tr class="row-odd"><td><p>ymin</p></td>
<td><p>rhos</p></td>
<td><p>Minimum y-axis limit</p></td>
</tr>
<tr class="row-even"><td><p>ymax</p></td>
<td><p>rhos</p></td>
<td><p>Maximum y-axis limit</p></td>
</tr>
<tr class="row-odd"><td><p>dt</p></td>
<td><p>oci^-1</p></td>
<td><p>Value of discrete timestep</p></td>
</tr>
<tr class="row-even"><td><p>end_time</p></td>
<td><p>oci^-1</p></td>
<td><p>Duration of simulation</p></td>
</tr>
<tr class="row-odd"><td><p>out_time</p></td>
<td><p>oci^-1</p></td>
<td><p>Time between small outputs</p></td>
</tr>
<tr class="row-even"><td><p>outmult</p></td>
<td></td>
<td><p>Number of small outputs before full fields are written out</p></td>
</tr>
<tr class="row-odd"><td><p>edge</p></td>
<td><p>rhos</p></td>
<td><p>Width of edge region</p></td>
</tr>
<tr class="row-even"><td><p>SOL</p></td>
<td><p>rhos</p></td>
<td><p>Width of SOL region</p></td>
</tr>
<tr class="row-odd"><td><p>wall</p></td>
<td><p>rhos</p></td>
<td><p>Width of wall region</p></td>
</tr>
<tr class="row-even"><td><p>n0</p></td>
<td><p>m^-3</p></td>
<td><p>Electron density at last closed flux surface</p></td>
</tr>
<tr class="row-odd"><td><p>te0</p></td>
<td><p>eV</p></td>
<td><p>Electron temperature at last closed flux surface</p></td>
</tr>
<tr class="row-even"><td><p>ti0</p></td>
<td><p>eV</p></td>
<td><p>Ion temperature at last closed flux surface</p></td>
</tr>
<tr class="row-odd"><td><p>Mp</p></td>
<td><p>eV</p></td>
<td><p>Parallel Mach number</p></td>
</tr>
<tr class="row-even"><td><p>A</p></td>
<td></td>
<td><p>Mass number</p></td>
</tr>
<tr class="row-odd"><td><p>Z</p></td>
<td></td>
<td><p>Charge number</p></td>
</tr>
<tr class="row-even"><td><p>Zeff</p></td>
<td></td>
<td><p>Effective charge</p></td>
</tr>
<tr class="row-odd"><td><p>q</p></td>
<td></td>
<td><p>Safety factor at last closed flux surface</p></td>
</tr>
<tr class="row-even"><td><p>B0</p></td>
<td><p>T</p></td>
<td><p>Magnetic field on axis</p></td>
</tr>
<tr class="row-odd"><td><p>r0</p></td>
<td><p>m</p></td>
<td><p>Minor radius</p></td>
</tr>
<tr class="row-even"><td><p>R0</p></td>
<td><p>m</p></td>
<td><p>Major radius</p></td>
</tr>
<tr class="row-odd"><td><p>Lp</p></td>
<td><p>m</p></td>
<td><p>Parallel connection length in the SOL region</p></td>
</tr>
<tr class="row-even"><td><p>Lpwall</p></td>
<td><p>m</p></td>
<td><p>Parallel connection length in the wall shadow region</p></td>
</tr>
</tbody>
</table>
<p>The remaining variables in the input file are better left unchanged.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 55%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>coordsys</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>gamma</p></td>
<td><p>0.00</p></td>
</tr>
<tr class="row-even"><td><p>sigma</p></td>
<td><p>0.00</p></td>
</tr>
<tr class="row-odd"><td><p>bprof</p></td>
<td><p>1.0</p></td>
</tr>
<tr class="row-even"><td><p>damping_nt</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>dissipation_nt</p></td>
<td><ol class="arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p>beta</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>mue_n_fac</p></td>
<td><p>1.0</p></td>
</tr>
<tr class="row-even"><td><p>mue_p_fac</p></td>
<td><p>1.0</p></td>
</tr>
<tr class="row-odd"><td><p>mue_P_fac</p></td>
<td><p>1.0</p></td>
</tr>
<tr class="row-even"><td><p>mue_w_fac</p></td>
<td><p>1.0</p></td>
</tr>
<tr class="row-odd"><td><p>ballooning</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>visc_layer_size</p></td>
<td><p>0.25</p></td>
</tr>
<tr class="row-odd"><td><p>drift_wave_term</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>drift_wave_Te</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>radial_electric_field</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>MP</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>MP_NS</p></td>
<td><p>100000</p></td>
</tr>
<tr class="row-even"><td><p>MP_SR</p></td>
<td><p>0.0000005</p></td>
</tr>
<tr class="row-odd"><td><p>hyper_factor</p></td>
<td><p>0.00000</p></td>
</tr>
<tr class="row-even"><td><p>sheath</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>background</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>background_n</p></td>
<td><p>0.025</p></td>
</tr>
<tr class="row-odd"><td><p>background_t</p></td>
<td><p>1.0</p></td>
</tr>
<tr class="row-even"><td><p>background_time</p></td>
<td><p>20</p></td>
</tr>
<tr class="row-odd"><td><p>ramb_up</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>ramb_up_time</p></td>
<td><p>5000</p></td>
</tr>
<tr class="row-odd"><td><p>fp</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>fixed_time</p></td>
<td><p>50</p></td>
</tr>
<tr class="row-odd"><td><p>init</p></td>
<td><p>999</p></td>
</tr>
<tr class="row-even"><td><p>init_ds</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>mean_flow</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>mean_flow_time</p></td>
<td><p>0.025</p></td>
</tr>
<tr class="row-odd"><td><p>mean_flow_radial</p></td>
<td><p>1.0</p></td>
</tr>
<tr class="row-even"><td><p>mean_dissipation</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>randbedingung0</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>bdvala0</p></td>
<td><p>0.000000</p></td>
</tr>
<tr class="row-odd"><td><p>bdvalb0</p></td>
<td><p>0.000000</p></td>
</tr>
<tr class="row-even"><td><p>amp_random0</p></td>
<td><p>0.0001</p></td>
</tr>
<tr class="row-odd"><td><p>randbedingung1</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>bdvala1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>bdvalb1</p></td>
<td><p>0.00</p></td>
</tr>
<tr class="row-even"><td><p>amp_random1</p></td>
<td><p>0.0001</p></td>
</tr>
<tr class="row-odd"><td><p>randbedingung2</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>bdvala2</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>bdvalb2</p></td>
<td><p>0.00</p></td>
</tr>
<tr class="row-even"><td><p>amp_random2</p></td>
<td><p>0.0001</p></td>
</tr>
<tr class="row-odd"><td><p>randbedingung3</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>bdvala3</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>bdvalb3</p></td>
<td><p>0.00</p></td>
</tr>
<tr class="row-even"><td><p>amp_random3</p></td>
<td><p>0.0001</p></td>
</tr>
</tbody>
</table>
</section>
<section id="profile-datafile">
<h5><span class="section-number">6.1.1.2.2. </span>Profile datafile<a class="headerlink" href="#profile-datafile" title="Permalink to this headline"></a></h5>
<p>The profile datafile provide the initial density and temperature field profiles, which also serve as reference profiles towards which the solution is relaxed in the innermost edge region of the HESEL domain. The datafile must have the filename <cite>exp_profiles.dat</cite> and an example can be found <a class="reference download internal" download="" href="_downloads/c8b2302ce17273d28e73e7fe22aa5d4b/exp_profiles.dat"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
<p>The datafile consists of four space-separated columns of data, so that each row constitute a datapoint. In each datapoint is the following data</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 60%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Variable</p></th>
<th class="head"><p>Unit</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Radial position with LCFS at 0</p></td>
<td><p>m</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Electron density</p></td>
<td><p>10^19 m^-3</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Electron temperature</p></td>
<td><p>eV</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Ion temperature</p></td>
<td><p>eV</p></td>
</tr>
</tbody>
</table>
</section>
<section id="probe-positions">
<span id="id4"></span><h5><span class="section-number">6.1.1.2.3. </span>Probe positions<a class="headerlink" href="#probe-positions" title="Permalink to this headline"></a></h5>
<p>The HESEL code will produce a set of default output data described in <a class="reference internal" href="#hesel-output"><span class="std std-ref">HESEL output</span></a>. Additional temporally highly resolved 1D data can be added from synthetic probes located in a row througout the domain. They are poloidally centered in the domain and located with a radial distance of 1 rhos. In the probe datafile, which must be named <cite>myprobe.dat</cite>, is specified the number of tips and their relative location, and the fields measured. An example of a probe datafile is found <a class="reference download internal" download="" href="_downloads/19528c066ec256c40ae36607d52f3cff/myprobe.dat"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
<p>The format must follow that of the provided example. Each tip has a specified relative position to the probe position in units of grid point spacing. I.e., the block</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -------------------------------------------------------------------</span>
<span class="c1">#  TIP1</span>
<span class="c1"># -------------------------------------------------------------------</span>
<span class="nd">@TIP1</span>   <span class="mf">10.0</span>    <span class="mf">0.0</span>     <span class="n">hdf5</span>
<span class="n">density</span>
<span class="n">vorticity</span>
<span class="n">temperature</span>
<span class="n">potential</span>
<span class="n">velocity_radial</span>
<span class="n">velocity_poloidal</span>
</pre></div>
</div>
<p>adds a probe-tip at 10 grid points radially outwards and at the same poloidal position as that of the probe. It outputs the electron density (density), E-cross-B vorticity (vorticity), electron temperature (temperature), the electrostatic potential (potential), radial velocity (volocity_radial), and poloidal velocity (velocity_poloidal) at the specified gridpoint. All output are in Bohm-normalized units.</p>
</section>
</section>
<section id="hesel-code-structure">
<h4><span class="section-number">6.1.1.3. </span>HESEL code structure<a class="headerlink" href="#hesel-code-structure" title="Permalink to this headline"></a></h4>
<p>The HESEL stand-alone code structure is graphed below</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_esel_c_GRAPH.png" src="_images/hesel_esel_c_GRAPH.png" />
</td>
</tr>
<tr class="row-even"><td><p>HESEL structure graph</p></td>
</tr>
</tbody>
</table>
<p>The workflow of the top level functions are described in the following. The function description is meant to give an high-lelvel overview of the workflow and supplement the in-code comments.</p>
<ul>
<li><p>main(int argc, char *argv[])</p>
<p>The <cite>main</cite> function is a wrapper for passing the programme arguments argc and argv to the <cite>esel_start_from_c</cite> function. The variable argv is a character list of programme arguments and argc is an integer that denote the number of items in argv.</p>
<ul>
<li><p>esel_start_from_c(itype argc, ctype **argv)</p>
<blockquote>
<div><p>The <cite>esel_start_from_c</cite> function contains the core workflow of the solver. It creates the two structures, data and para, that, together with argc and argv, are passed through the HESEL workflow.</p>
<p>Everything up to the <cite>run_esel</cite> function is initialization of data, MPI, etc.</p>
<p>The programme arguments are interpreted and applied in <cite>func_passing_argv</cite></p>
<ul>
<li><p>func_passing_argv(argc, argv, &amp;data, &amp;para)</p>
<p>The function determine if the simulation is starting from previous simulation data or not, by checking, if the flag <cite>-restart</cite> is in the programme arguments. It iterates through the other arguments; if <cite>-I</cite> the input data are to be loaded from an ini-file, if <cite>-H</cite> the input data are to beloaded from an HDF5 file, and if <cite>-wrapper</cite> the data are to passed from a programme wrapper. The input file option is stored in the para structure and applied after the <cite>set_default_parameters</cite> function.</p>
</li>
</ul>
<p>and the <cite>set_default_parameters</cite> function is called.</p>
<ul>
<li><p>set_default_parameters(&amp;data,&amp;para)</p>
<p>This function is deprecated and does not alter the data and para structures.</p>
</li>
</ul>
<p>Depending on where the input parameters are stored, one of three functions are called. The information of input file type is set in the para structure by the <cite>func_passing_argv</cite> function. If the input are stored in a c-file <cite>func_wrapper</cite> is called, in an ini-file <cite>func_inifile</cite> is called, and in a HDF5 file <cite>func_hdf5file</cite> is called.</p>
<ul>
<li><p>func_wrapper(argc, argv, &amp;data, &amp;para)</p>
<p>Checks if the restart option is set to true in the para structure; if so, the code exits, as that option is not compatible with the wrapper setup.</p>
<p>The function calls a number of subfuntions to initialize the para and data structures from the input given by the wrapper, that would otherwise be read from an ini-file as described in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a>. All data are appended to the para and data structures.</p>
</li>
<li><p>func_inifile(argc, argv, &amp;data, &amp;para)</p>
<p>Checks if the restart option is set to true in the para structure; if so, the code exits, as that option is not compatible with the inifile setup.</p>
<p>The function calls a number of subfuntions to initialize the para and data structures from the input file described in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a>. All data are appended to the para and data structures.</p>
</li>
<li><p>func_hdf5file(argc, argv, &amp;data, &amp;para)</p>
<p>The function calls a number of subfuntions to initialize the para and data structures from the input given by a HDF5 file, that would otherwise be read from an ini-file as described in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a>. The data are stored in the <cite>/params/structure_data</cite> and <cite>/params/structure_param</cite> groups described in <a class="reference internal" href="#hesel-output"><span class="std std-ref">HESEL output</span></a>. All data are appended to the para and data structures.</p>
</li>
</ul>
<p>The data and para structures are initialized further in <cite>func_common_init</cite></p>
<ul>
<li><p>func_common_init(&amp;data, &amp;para)</p>
<p>The current time variables are stored in the para structure, and the data attribute <cite>range</cite> is set from the domain limits stored in para. The function checks the para attribute <cite>coordsys</cite> to determine the labels on the data attributes <cite>coordsys</cite> and <cite>dim_label</cite>.</p>
</li>
</ul>
<p>and settings defined in <cite>esel_settings</cite>.</p>
<ul>
<li><p>esel_settings(&amp;data, &amp;para)</p>
<p>Derived parameters are stored in the para and data structures. This includes grid spacings, output switches, datafile name (based on the para attributes <cite>codename</cite>, <cite>shot_no</cite> and <cite>run_no</cite>), and computer specific attributes.</p>
</li>
</ul>
<p>The MPI communicaters and parameters are set up in <cite>PH_MPI_Prepare</cite></p>
<ul>
<li><p>PH_MPI_Prepare(&amp;data,&amp;para)</p>
<p>The geometry is specified for the MPI. Periodic boundaries are set and neighbouring coordinates are defined for parallelization in the x-direction.</p>
</li>
</ul>
<p>and fields are initialized in <cite>func_common_init_fields</cite>.</p>
<ul>
<li><p>func_common_init_fields(&amp;data, &amp;para)</p>
<p>The solution fields are initialized with random noise. If no input files are provided the solution fields are assigned default initial profiles.</p>
</li>
</ul>
<p>The probe configuration, for obtaining high temporally resolved data at probe positions, are loaded in the function <cite>read_probe_configuration</cite>.</p>
<ul>
<li><p>read_probe_configuration()</p>
<p>The probe configuration is obtained from the probe configuration file <a class="reference internal" href="#probe-positions"><span class="std std-ref">Probe positions</span></a>. A structure array of pype probe_t is created to store the probe information.</p>
</li>
</ul>
<p>Everything is now initialized and the system of differential equations is solved in <cite>run_esel</cite></p>
<ul>
<li><p>run_esel(&amp;data, &amp;para)</p>
<p>The first half of the <cite>run_esel</cite> function finalizes the initialization; variables and fields are allocated and some loaded from the data and para structures. The logarithm of boundary values and fields is calculated for the solution fields. The field background values are derived. The ion temperature ramp-up scheme is initialized, and boundary values are applied.</p>
<p>The HDF5 output file is created and initial data stored in the para and data structures are written to this.</p>
<p>The second half of the <cite>run_esel</cite> function consists of a loop which iterates through the time range in steps of dt. The time loop has the following steps:</p>
<ul>
<li><p>Print datasets to the HDF5 output file</p>
<p>At specified time intervals the soulution fields and derived fields (w.g. profiles and integrated values) are written to the output file.</p>
</li>
<li><p>The fields are testet for nan values</p></li>
<li><p>The ion temperature is ramped up</p>
<p>If a ramp-up scheme is chosen for the ion temperature the increase in ion edge pressure profile is executed at this stage, and the inner boundary condition updated accordingly.</p>
</li>
<li><p>The forward time step values of the (logarithmic) solution fields are calculated</p>
<p>In the order; generalized vorticity, density, electron temperature, ion temperature. After each time step is calculated the step is made and dissipation applied.</p>
</li>
<li><p>The solution fields are derived</p>
<p>From their log values, and the vorticity and electrostatic potential is calculated from the generalized forticity.</p>
</li>
<li><p>The higly resolved probe data is written</p></li>
<li><p>Running avarages, turbulent energy, particle flux are calculated</p>
<p>And the energies are written to the output file</p>
</li>
</ul>
</li>
</ul>
<p>The program is terminated by an exit() command after the time loop termination condition is reached.</p>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</section>
<section id="running-a-hesel-simulation">
<h4><span class="section-number">6.1.1.4. </span>Running a HESEL simulation<a class="headerlink" href="#running-a-hesel-simulation" title="Permalink to this headline"></a></h4>
<p>HESEL is run in from the data directory, containing the input file (and optional data files) using mpirun. In the data directory return</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpirun</span> <span class="o">-</span><span class="n">np</span><span class="o">=&lt;</span><span class="n">number_of_processors</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">path_to_esel</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">I</span> <span class="o">&lt;</span><span class="n">input_file_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Here <code class="code docutils literal notranslate"><span class="pre">&lt;number_of_processors&gt;</span></code> is the number of processors to run the code and must be a power of 2, <code class="code docutils literal notranslate"><span class="pre">&lt;path_to_esel&gt;</span></code> is the path to the compiled HESEL code conventionally located in <cite>C-HESEL/bin/esel.marconi.A3</cite> for a MARCONI install, and <code class="code docutils literal notranslate"><span class="pre">&lt;input_file_name&gt;</span></code> is the name of the input file described in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a>.</p>
</section>
<section id="hesel-output">
<span id="id5"></span><h4><span class="section-number">6.1.1.5. </span>HESEL output<a class="headerlink" href="#hesel-output" title="Permalink to this headline"></a></h4>
<p>For a run with an input file <cite>filename</cite> HESEL produces two output files; <cite>filename.erh</cite> and <cite>filename.h5</cite>. The .erh file reviews the run settings and displays key parameters for the simulation. The full simulation data output is stored in the hdf5 file.</p>
<p>The structure of the output datafile <cite>filename.h5</cite> is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">data</span>
<span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">var0d</span>
<span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">var1d</span>
<span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">var1d</span><span class="o">/</span><span class="n">fixed</span><span class="o">-</span><span class="n">probes</span>
<span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">var2d</span>
<span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">var2d</span><span class="o">/</span><span class="n">grid</span>
<span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">var3d</span>
<span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">xanimation</span>
<span class="o">/</span><span class="n">documentation</span>
<span class="o">/</span><span class="n">equil</span>
<span class="o">/</span><span class="n">params</span>
<span class="o">/</span><span class="n">params</span><span class="o">/</span><span class="n">structure_data</span>
<span class="o">/</span><span class="n">params</span><span class="o">/</span><span class="n">structure_param</span>
</pre></div>
</div>
<p>The content of the groups are described in detail below.</p>
<ul>
<li><p><strong>data</strong></p>
<p>The <cite>data</cite> group stores the subgroups with the solution data and derived data that are of interest. The data are grouped into the number of spatial dimensions of the data, e.g., the <cite>var1d</cite> group contains data of one spatial dimension (e.g., temporal evolution of profiles). The <cite>data</cite> subgroups are</p>
<ul>
<li><p><strong>var0d</strong>
This group contains derived data of zero spatial dimension.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 16%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Dimensions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SOL_density</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Spatially iend_time/out_timeegrated SOL density</p></td>
</tr>
<tr class="row-odd"><td><p>SOL_energy_elec</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Spatially iend_time/out_timeegrated SOL electron energy</p></td>
</tr>
<tr class="row-even"><td><p>SOL_energy_ion</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Spatially iend_time/out_timeegrated SOL ion energy</p></td>
</tr>
<tr class="row-odd"><td><p>Te0</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Electron reference temperature at LCFS</p></td>
</tr>
<tr class="row-even"><td><p>Ti0</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Ion reference temperature at LCFS</p></td>
</tr>
<tr class="row-odd"><td><p>cflp</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>cflr</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>dEdt</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>energy_elec</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Spatially iend_time/out_timeegrated electron energy for the domain</p></td>
</tr>
<tr class="row-odd"><td><p>energy_gkin</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>energy_ion</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Spatially iend_time/out_timeegrated ion energy for the domain</p></td>
</tr>
<tr class="row-odd"><td><p>energy_kin</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>energy_kin_0</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>energy_kin_f</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>energy_out_P</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>energy_out_p</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pe_curv_f</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pe_curv_pi</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pi_curv_f</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>shear</p></td>
<td><p>end_time/out_time</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>total_density</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Spatially iend_time/out_timeegrated density for the domain</p></td>
</tr>
<tr class="row-odd"><td><p>total_energy</p></td>
<td><p>end_time/out_time</p></td>
<td><p>Spatially integrated total energy for the domain</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><strong>var1d</strong>
This group contains derived data of one spatial dimension.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 26%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Dimensions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CLSOED field line</p></td>
<td><p>Nx</p></td>
<td><p>Array with 1 in edge region, 0 in SOL region</p></td>
</tr>
<tr class="row-odd"><td><p>Density-Prof</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td><p>Low temporally resolved density profile</p></td>
</tr>
<tr class="row-even"><td><p>Density-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>High temporally resolved density profile</p></td>
</tr>
<tr class="row-odd"><td><p>Diff-Ion-Flux-Tgrad(n)-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>Ti*grad(n) profile</p></td>
</tr>
<tr class="row-even"><td><p>Diff-Ion-Flux-grad(P)-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>grad(Pi) profile</p></td>
</tr>
<tr class="row-odd"><td><p>Diff-Ion-Flux-ngrad(T)-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>n*grad(Ti) profile</p></td>
</tr>
<tr class="row-even"><td><p>Diff-den-Flux-grad(n)-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>grad(n) profile</p></td>
</tr>
<tr class="row-odd"><td><p>Diff-ele-Flux-grad(p)-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>grad(Pe) profile</p></td>
</tr>
<tr class="row-even"><td><p>Ele-Pres-Prof</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td><p>Low temporally resolved electron pressure profile</p></td>
</tr>
<tr class="row-odd"><td><p>Ele-Pres-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>High temporally resolved electron pressure profile</p></td>
</tr>
<tr class="row-even"><td><p>Ele-Temp-Prof</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td><p>Low temporally resolved electron temperature profile</p></td>
</tr>
<tr class="row-odd"><td><p>Ele-Temp-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>High temporally resolved electron temperature profile</p></td>
</tr>
<tr class="row-even"><td><p>Flux-P-tur</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Flux-P-tur-inst</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Flux-T-tur</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Flux-heat-P-tur</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Flux-heat-p-tur</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Flux-p-tur</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Flux-p-tur-inst</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Flux-pres_tur</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Flux-t-tur</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Gen-Vort-Prof</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td><p>Low temporally resolved generalized vorticity profile</p></td>
</tr>
<tr class="row-even"><td><p>Gen-Vort-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>High temporally resolved generalized vorticity profile</p></td>
</tr>
<tr class="row-odd"><td><p>Ion-Pres-Prof</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td><p>Low temporally resolved ion pressure profile</p></td>
</tr>
<tr class="row-even"><td><p>Ion-Pres-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>High temporally resolved ion pressure profile</p></td>
</tr>
<tr class="row-odd"><td><p>Ion-Temp-Prof</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td><p>Low temporally resolved ion temperature profile</p></td>
</tr>
<tr class="row-even"><td><p>Ion-Temp-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>High temporally resolved ion temperature profile</p></td>
</tr>
<tr class="row-odd"><td><p>OPEN field line</p></td>
<td><p>Nx</p></td>
<td><p>Array with 0 in edge region, 1 in SOL region</p></td>
</tr>
<tr class="row-even"><td><p>Pot-Prof</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td><p>Low temporally resolved electrostatic potential profile</p></td>
</tr>
<tr class="row-odd"><td><p>Pot-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td><p>High temporally resolved electrostatic potential profile</p></td>
</tr>
<tr class="row-even"><td><p>Pressure-stress1-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Pressure-stress2-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Pressure-stress3-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Pressure-work1-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Pressure-work2-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Pressure-work3-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Reynolds-stress-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Reynolds-work-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Tur-par-Flux</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Tur-par-Flux-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fp_P</p></td>
<td><p>Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fp_fluc</p></td>
<td><p>Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fp_mean</p></td>
<td><p>Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fp_n</p></td>
<td><p>Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fp_p</p></td>
<td><p>Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fp_w</p></td>
<td><p>Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>gf-inst</p></td>
<td><p>end_time/out_time x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mean_vp</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mean_w</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>rcor</p></td>
<td><p>Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>sheath_profile</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-odd"><td><p>visc_P</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>visc_n</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>visc_p</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>visc_w</p></td>
<td><p>end_time/(out_time*otmult) x Nx</p></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><dl class="simple">
<dt><strong>fixed-probes</strong></dt><dd><p>This group contains temporally higly resolved spatial data at probe postions. Below is given an example for probes with only one probe tip (TIP0). For multiple probe tips the output data list expands accordingly.</p>
</dd>
</dl>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 15%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Dimensions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TIP0_density</p></td>
<td><p>end_time/10 x xmax</p></td>
<td><p>Density at probe position at very high temporal resolution</p></td>
</tr>
<tr class="row-odd"><td><p>TIP0_potential</p></td>
<td><p>end_time/10 x xmax</p></td>
<td><p>Electrostatic potential at probe position at very high temporal resolution</p></td>
</tr>
<tr class="row-even"><td><p>TIP0_temperature</p></td>
<td><p>end_time/10 x xmax</p></td>
<td><p>Electron temperature at probe position at very high temporal resolution</p></td>
</tr>
<tr class="row-odd"><td><p>TIP0_temperature_i</p></td>
<td><p>end_time/10 x xmax</p></td>
<td><p>Ion temperature at probe position at very high temporal resolution</p></td>
</tr>
<tr class="row-even"><td><p>TIP0_velocity_poloidal</p></td>
<td><p>end_time/10 x xmax</p></td>
<td><p>Poloidal velocity at probe position at very high temporal resolution</p></td>
</tr>
<tr class="row-odd"><td><p>TIP0_velocity_radial</p></td>
<td><p>end_time/10 x xmax</p></td>
<td><p>Radial velocity at probe position at very high temporal resolution</p></td>
</tr>
<tr class="row-even"><td><p>TIP0_vorticity</p></td>
<td><p>end_time/10 x xmax</p></td>
<td><p>Vorticity at probe position at very high temporal resolution</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li><dl class="simple">
<dt><strong>var2d</strong></dt><dd><p>This group contains the solution data (Density, Gen_Vorticity, Ion_Pressure, Pressure) and derived data of (mostly) two spatial dimensions.</p>
</dd>
</dl>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 43%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Dimensions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Density</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Density</p></td>
</tr>
<tr class="row-odd"><td><p>Gen_Potential</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Generalized potential</p></td>
</tr>
<tr class="row-even"><td><p>Gen_Vorticity</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Generalized vorticity</p></td>
</tr>
<tr class="row-odd"><td><p>Ion_Pressure</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Ion pressure</p></td>
</tr>
<tr class="row-even"><td><p>Ion_temp</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Ion temperature</p></td>
</tr>
<tr class="row-odd"><td><p>Magnetic Field (b_0)</p></td>
<td><p>Nx</p></td>
<td><p>Magnetic field</p></td>
</tr>
<tr class="row-even"><td><p>Potential</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Electrostatic potential</p></td>
</tr>
<tr class="row-odd"><td><p>Pressure</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Electron pressure</p></td>
</tr>
<tr class="row-even"><td><p>Temperature</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Electron temperature</p></td>
</tr>
<tr class="row-odd"><td><p>Vorticity</p></td>
<td><p>end_time/(out_time*otmult) x Nx x Ny</p></td>
<td><p>Vorticity</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p><strong>grid</strong>
This group contains the two dimensional spatial grid.</p></li>
</ul>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 46%" />
<col style="width: 26%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Dimensions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x</p></td>
<td><p>Nx x Ny</p></td>
<td><p>x-grid</p></td>
</tr>
<tr class="row-odd"><td><p>y</p></td>
<td><p>Nx x Ny</p></td>
<td><p>y-grid</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p><strong>var3d</strong></p>
<p>Currently no data are stored in this group.</p>
</li>
<li><p><strong>xanimation</strong>
This group contains the solution data (and the electric potential) at high spatial, low temporal resolution, aimed for visual representation of the data.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Dimensions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>density</p></td>
<td><p>end_time/out_time x Nx/4 x Ny/4</p></td>
<td><p>High temporal, low spatial resolved density (for animations)</p></td>
</tr>
<tr class="row-odd"><td><p>electron_pressure</p></td>
<td><p>end_time/out_time x Nx/4 x Ny/4</p></td>
<td><p>High temporal, low spatial resolved electron pressure (for animations)</p></td>
</tr>
<tr class="row-even"><td><p>ion_pressure</p></td>
<td><p>end_time/out_time x Nx/4 x Ny/4</p></td>
<td><p>High temporal, low spatial resolved ion pressure (for animations)</p></td>
</tr>
<tr class="row-odd"><td><p>potential</p></td>
<td><p>end_time/out_time x Nx/4 x Ny/4</p></td>
<td><p>High temporal, low spatial resolved electrostatic potential (for animations)</p></td>
</tr>
<tr class="row-even"><td><p>vorticity</p></td>
<td><p>end_time/out_time x Nx/4 x Ny/4</p></td>
<td><p>High temporal, low spatial resolved vorticity (for animations)</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li><p><strong>documentation</strong></p>
<p>The <cite>documentation</cite> group contains two datafiles, which are merely copies of the input files.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Filename</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>myprobe.dat</p></td>
<td><p>Copy of <cite>myprobe.dat</cite> datafile described in <a class="reference internal" href="#probe-positions"><span class="std std-ref">Probe positions</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>run.ini</p></td>
<td><p>Copy of input file described in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a>.</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><strong>equil</strong></p>
<p>Currently no data are stored in this group.</p>
</li>
<li><p><strong>params</strong></p>
<p>This group contains two subgroups with parameter data that are either defined in, or derived directly from, the input file. These data are mainly for the purpose of restarting a simulation from an existing HDF5 output file.</p>
<ul>
<li><p><strong>structure_data</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 19%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Dimensions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>cwd</p></td>
<td><p>1</p></td>
<td><p>Current working directory</p></td>
</tr>
<tr class="row-odd"><td><p>desc</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-even"><td><p>dims0</p></td>
<td><p>1</p></td>
<td><p>Same as ny</p></td>
</tr>
<tr class="row-odd"><td><p>dims1</p></td>
<td><p>1</p></td>
<td><p>Number of x gridpoints</p></td>
</tr>
<tr class="row-even"><td><p>dims2</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-odd"><td><p>elements0</p></td>
<td><p>1</p></td>
<td><p>Same as ny</p></td>
</tr>
<tr class="row-even"><td><p>elements1</p></td>
<td><p>1</p></td>
<td><p>Same as nx</p></td>
</tr>
<tr class="row-odd"><td><p>elements2</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-even"><td><p>lnx</p></td>
<td><p>1</p></td>
<td><p>Same as nx</p></td>
</tr>
<tr class="row-odd"><td><p>lny</p></td>
<td><p>1</p></td>
<td><p>Same as ny</p></td>
</tr>
<tr class="row-even"><td><p>lnz</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-odd"><td><p>maschine</p></td>
<td><p>1</p></td>
<td><p>Operating system</p></td>
</tr>
<tr class="row-even"><td><p>number</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-odd"><td><p>nx</p></td>
<td><p>1</p></td>
<td><p>Number of x gridpoints per processor</p></td>
</tr>
<tr class="row-even"><td><p>ny</p></td>
<td><p>1</p></td>
<td><p>Number of y gridpoints</p></td>
</tr>
<tr class="row-odd"><td><p>nz</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-even"><td><p>offx</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>offy</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>offz</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>range00</p></td>
<td><p>1</p></td>
<td><p>Lower y boundary [rhos]</p></td>
</tr>
<tr class="row-even"><td><p>range01</p></td>
<td><p>1</p></td>
<td><p>Upper y boundary [rhos]</p></td>
</tr>
<tr class="row-odd"><td><p>range10</p></td>
<td><p>1</p></td>
<td><p>Lower x boundary [rhos]</p></td>
</tr>
<tr class="row-even"><td><p>range11</p></td>
<td><p>1</p></td>
<td><p>Upper x boundary [rhos]</p></td>
</tr>
<tr class="row-odd"><td><p>range20</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-even"><td><p>range21</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-odd"><td><p>rank</p></td>
<td><p>1</p></td>
<td><p>2 for 2D code (only option)</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><strong>structure_param</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 18%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Dimensions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>A</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>B0</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>Lp</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Lpwall</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>MP</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>MP_NS</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>MP_SR</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Mp</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>R0</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>SOL</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>Te0</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Ti0</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>Z</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Zeff</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>adv_P</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>adv_n</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>adv_p</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>adv_w</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>amp_random0</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>amp_random1</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>amp_random2</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>amp_random3</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>background</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>background_n</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>background_t</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>background_time</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>bdval00</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bdval01</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>bdval10</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bdval11</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>bdval20</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bdval21</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>bdval30</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bdval31</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>bdval40</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bdval41</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>beta</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>boundary0</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>boundary1</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>boundary2</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>boundary3</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bprof</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>con_P</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>con_p</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>coordsys</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>cs</p></td>
<td><p>1</p></td>
<td><p>Ion sound speed [rhos w_ci]</p></td>
</tr>
<tr class="row-even"><td><p>damping_nt</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>dissipation_nt</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>dkx</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>dky</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>dkz</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>drift_wave_Te</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>drift_wave_term</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>dt</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>dx</p></td>
<td><p>1</p></td>
<td><p>x grid point spacing [rhos]</p></td>
</tr>
<tr class="row-odd"><td><p>dy</p></td>
<td><p>1</p></td>
<td><p>y grid point spacing [rhos]</p></td>
</tr>
<tr class="row-even"><td><p>dz</p></td>
<td><p>1</p></td>
<td><p><em>Redundant</em></p></td>
</tr>
<tr class="row-odd"><td><p>edge</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>end_time</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>energy</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fixed_time</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fp</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>gamma</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>gradB</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>hyper_factor</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>init</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>init_ds</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>lamda</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>limiter</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mean_dissipation</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mean_flow</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mean_flow_radial</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mean_flow_time</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mue_P</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mue_P_fac</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>mue_n</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mue_n_fac</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>mue_p</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mue_p_coupling</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mue_p_fac</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>mue_t</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mue_t_fac</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mue_w</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mue_w_fac</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>ne0</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>nprof</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>offset</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>otmult</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>out_time</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>phiprof</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>q</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>r0</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>ramb_up</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>ramb_up_time</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>rho_e</p></td>
<td><p>1</p></td>
<td><p>Electron thermal gyro-radius [m]</p></td>
</tr>
<tr class="row-odd"><td><p>rho_i</p></td>
<td><p>1</p></td>
<td><p>Ion thermal gyro-radius [m]</p></td>
</tr>
<tr class="row-even"><td><p>rho_s</p></td>
<td><p>1</p></td>
<td><p>Cold-ion hybrid thermal gyro-radius [m]</p></td>
</tr>
<tr class="row-odd"><td><p>run_no</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>sheath</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>shot_no</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>sigma</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>time</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>tprof</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>w_ce</p></td>
<td><p>1</p></td>
<td><p>Electron cyclotron frequency [s^-1]</p></td>
</tr>
<tr class="row-even"><td><p>w_ci</p></td>
<td><p>1</p></td>
<td><p>Ion cyclotron frequency [s^-1]</p></td>
</tr>
<tr class="row-odd"><td><p>wall</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>xmax</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>xmin</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-even"><td><p>ymax</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>ymin</p></td>
<td><p>1</p></td>
<td><p>Given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a></p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
</ul>
</section>
</section>
<section id="hesel-as-an-actor">
<span id="id6"></span><h3><span class="section-number">6.1.2. </span>HESEL as an actor<a class="headerlink" href="#hesel-as-an-actor" title="Permalink to this headline"></a></h3>
<p>In this part HESEL is build as a library. First ensure that you have access to the cpo_interface SVN repository. In a browser load</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gforge</span><span class="o">-</span><span class="nb">next</span><span class="o">.</span><span class="n">eufus</span><span class="o">.</span><span class="n">eu</span><span class="o">/</span>
</pre></div>
</div>
<p>and ask for a new password if you cannot login. If you do not have access contact <a class="reference external" href="mailto:ahnie&#37;&#52;&#48;fysik&#46;dtu&#46;dk">ahnie<span>&#64;</span>fysik<span>&#46;</span>dtu<span>&#46;</span>dk</a>. On the EUROfusion Gateway open a terminal, change directory to (suggested) your <cite>public</cite> folder. Download the C-HESEL repository by following the guide in <a class="reference internal" href="#hesel-as-stand-alone"><span class="std std-ref">HESEL as stand-alone</span></a>. In the <cite>C-HESEL</cite> repository check out the branch called <cite>WPCD-workflow-dev</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">WPCD</span><span class="o">-</span><span class="n">workflow</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>and make sure that the commit 40da0f4dcb9aa6063d500f6c4fa824071042b77e made on 23.6.2021 is included. Now, in the <cite>C_HESEL</cite> directory return</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">FUTILS_version2</span><span class="mf">.2</span><span class="o">/</span><span class="n">src</span>
<span class="n">make</span> <span class="o">-</span><span class="n">f</span> <span class="n">Makefile</span><span class="o">.</span><span class="n">gateway</span> <span class="n">clean</span>
<span class="n">make</span> <span class="o">-</span><span class="n">f</span> <span class="n">Makefile</span><span class="o">.</span><span class="n">gateway</span>
<span class="n">cd</span> <span class="o">../..</span>
<span class="n">make</span> <span class="n">clean</span>
<span class="n">make</span> <span class="n">esel</span>
<span class="n">make</span> <span class="n">libhesel</span>
</pre></div>
</div>
<p>After that, and still in you <cite>public</cite> folder, return the following</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">svn</span> <span class="n">co</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gforge</span><span class="o">-</span><span class="nb">next</span><span class="o">.</span><span class="n">eufus</span><span class="o">.</span><span class="n">eu</span><span class="o">/</span><span class="n">svn</span><span class="o">/</span><span class="n">cpo_interface</span>
</pre></div>
</div>
<p>to checkout the wrapper repository. Now enter the directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">cpo_interface</span><span class="o">/</span><span class="n">tags</span><span class="o">/</span><span class="mf">3.31.0</span><span class="o">/</span><span class="n">ids</span>
</pre></div>
</div>
<p>and edit the file <cite>Makefile.gateway</cite>. In this file you will find four lines that contain a reference to a path belonging to the user <cite>g2ahnie</cite>. Those lines are line no. 11, 13, 20 and 23. Change the path in those lines to that which points to the corresponding files in the <cite>C-HESEL</cite> repository in your <cite>public</cite> directory. Save the edit, quit the editor and in the terminal return</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">-</span><span class="n">f</span> <span class="n">Makefile</span><span class="o">.</span><span class="n">gateway</span> <span class="n">clean</span>
<span class="n">make</span> <span class="o">-</span><span class="n">f</span> <span class="n">Makefile</span><span class="o">.</span><span class="n">gateway</span> <span class="n">libhesel</span>
</pre></div>
</div>
<p>to make the HESEL library <cite>libheselwrapper.a</cite>.</p>
</section>
<section id="hesel-in-the-kepler-workflow">
<span id="id7"></span><h3><span class="section-number">6.1.3. </span>HESEL in the KEPLER workflow<a class="headerlink" href="#hesel-in-the-kepler-workflow" title="Permalink to this headline"></a></h3>
<p>On the EUROfusion Gateway build the HESEL library as described in <a class="reference internal" href="#hesel-as-an-actor"><span class="std std-ref">HESEL as an actor</span></a>. Open a terminal and return the following to load the required modules</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">purge</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">cineca</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">imasenv</span><span class="o">/</span><span class="mf">3.31.0</span><span class="o">/</span><span class="n">rc</span>
<span class="n">module</span> <span class="n">unload</span> <span class="n">itm</span><span class="o">-</span><span class="n">hdf5</span> <span class="n">hdf5</span>
<span class="n">module</span> <span class="n">load</span>  <span class="n">itm</span><span class="o">-</span><span class="n">hdf5</span><span class="o">/</span><span class="mf">1.8.17</span><span class="o">/</span><span class="n">intel</span><span class="o">/</span><span class="mf">17.0</span><span class="o">/</span><span class="n">mpi</span>
<span class="n">module</span> <span class="n">switch</span> <span class="n">kepler</span><span class="o">/</span><span class="mf">2.5</span><span class="n">p5</span><span class="o">-</span><span class="mf">3.1.1_3.31.0</span><span class="n">_rc</span>
<span class="n">module</span> <span class="n">switch</span> <span class="n">imas</span><span class="o">-</span><span class="n">fc2k</span><span class="o">/</span><span class="mf">4.13.0</span>
</pre></div>
</div>
<p>If not installed already, install Kepler by returning</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kepler_install</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>where &lt;username&gt; is your usename for the Gateway and allow for the directory to be created if prompted for this. After installing Kepler load it by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kepler_load</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>A number of directories have to be moved to other partitions and replaced by symbolic links. In the terminal return the following</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~</span>
<span class="n">mkdir</span> <span class="n">work</span> <span class="p">(</span><span class="k">if</span> <span class="n">it</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">already</span> <span class="n">exist</span><span class="p">)</span>
<span class="n">mkdir</span> <span class="n">work</span><span class="o">/</span><span class="n">KEPLEREXECUTION</span> <span class="p">(</span><span class="k">if</span> <span class="n">it</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">already</span> <span class="n">exist</span><span class="p">)</span>
<span class="n">cd</span> <span class="n">public</span>
<span class="n">mv</span> <span class="n">imasdb</span> <span class="o">../</span><span class="n">work</span><span class="o">/</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">../</span><span class="n">work</span><span class="o">/</span><span class="n">imasdb</span> <span class="n">imasdb</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">../</span><span class="n">work</span><span class="o">/</span><span class="n">KEPLEREXECUTION</span> <span class="n">KEPLEREXECUTION</span>
</pre></div>
</div>
<p>And an IMAS database initiated</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">imasdbs</span> <span class="o">-</span><span class="n">u</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>In the terminal return</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fc2k</span>
</pre></div>
</div>
<p>This will open a new window to generate a Kepler actor.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_generate_actor.png" src="_images/hesel_generate_actor.png" />
</td>
</tr>
<tr class="row-even"><td><p>Kepler actor generator window</p></td>
</tr>
</tbody>
</table>
<p>In the <cite>file</cite> menu click <cite>open</cite> and navigate to the file (most likely located in) <cite>public/cpo_interface/tags/3.31.0/scripts/Actors/HESEL_1.0.0.xml</cite> and click <cite>open</cite>. In the tabs <cite>Environment</cite>, <cite>Parameters</cite>, and <cite>Source</cite>, if applicable, change the paths that belong to the user <cite>g2ahnie</cite> to the corresponding paths in your system. Click <cite>Generate</cite> to generate the actor from the wrapper that calls the HESEL code.</p>
<p>In the terminal run KEPLER by returning</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kepler</span>
</pre></div>
</div>
<p>this will open a new window. In KEPLER open the HESEL actor that was just generated in <cite>file</cite> -&gt; <cite>open</cite> to load the workflow.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_kepler_workflow.png" src="_images/hesel_kepler_workflow.png" />
</td>
</tr>
<tr class="row-even"><td><p>HESEL workflow in KEPLER</p></td>
</tr>
</tbody>
</table>
<p>In the first actor, <cite>START</cite>, constrols the workflow input. By double clicking the box a window pops up which allows for the user to edit the workflow input parameters</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_kepler_START.png" src="_images/hesel_kepler_START.png" />
</td>
</tr>
<tr class="row-even"><td><p>Edit HESEL workflow input parameters</p></td>
</tr>
</tbody>
</table>
<p>The input have the following descriptions</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>user_name</p></td>
<td><p>Name of user from which experiment imas database are loaded</p></td>
</tr>
<tr class="row-odd"><td><p>machine_name</p></td>
<td><p>Short name of device</p></td>
</tr>
<tr class="row-even"><td><p>shot_number</p></td>
<td><p>Machine shot number</p></td>
</tr>
<tr class="row-odd"><td><p>input_run</p></td>
<td><p>Input run number for HESEL realisation</p></td>
</tr>
<tr class="row-even"><td><p>output_run</p></td>
<td><p>Output run number for HESEL</p></td>
</tr>
<tr class="row-odd"><td><p>time</p></td>
<td><p>Time at which experimental data are pulled</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The second actor, <cite>MAP_EXP_DATA</cite>, maps the input profiles that HESEL will use as initial conditions and reference profiles in the forcing region. If you double click the box the following editing window is opened</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_kepler_MAP.png" src="_images/hesel_kepler_MAP.png" />
</td>
</tr>
<tr class="row-even"><td><p>Edit HESEL workflow data mapping parameters</p></td>
</tr>
</tbody>
</table>
<p>The input have the following descriptions</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R_start</p></td>
<td><p>Radial profile coordinate starting position</p></td>
</tr>
<tr class="row-odd"><td><p>R_end</p></td>
<td><p>Radial profile coordinate ending position</p></td>
</tr>
<tr class="row-even"><td><p>Z_start</p></td>
<td><p>Longitudinal profile coordinate starting position</p></td>
</tr>
<tr class="row-odd"><td><p>Z_end</p></td>
<td><p>Longitudinal profile coordinate ending position</p></td>
</tr>
<tr class="row-even"><td><p>Npoints</p></td>
<td><p>Grid resolution</p></td>
</tr>
<tr class="row-odd"><td><p>Visualize_data</p></td>
<td><p>Whether to visualize the profile data or not</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note that if <cite>yes</cite> is selected for <cite>Visualize_data</cite>, the data will be displayed as below and the workflow stops.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_kepler_profiles.png" src="_images/hesel_kepler_profiles.png" />
</td>
</tr>
<tr class="row-even"><td><p>Example of resulting window when Visualize_data is selected</p></td>
</tr>
</tbody>
</table>
<p>To run the workflow beyond the <cite>MAP_EXP_DATA</cite> actor the value for <cite>Visualize_data</cite> has to be <cite>no</cite> when the workflow is initiated.</p>
<p>The third, and last editable, actor is the <cite>HESEL</cite> actor. Right-click this box and select <cite>Open Actor</cite> to edit the submission script and non-predetermined HESEL input parameters. The following window appears when the actor is opened.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_kepler_HESEL.png" src="_images/hesel_kepler_HESEL.png" />
</td>
</tr>
<tr class="row-even"><td><p>Workflow within the HESEL actor</p></td>
</tr>
</tbody>
</table>
<p>The only relevant actor within this sub-workflow is that called <cite>HESEL</cite>. When this box is double clicked the following window appears</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_kepler_HESEL__edit.png" src="_images/hesel_kepler_HESEL__edit.png" />
</td>
</tr>
<tr class="row-even"><td><p>The HESEL actor where submission data can be edited</p></td>
</tr>
</tbody>
</table>
<p>The batch file appears in this window and it is possible to adjust this to alter submission data. If the button <cite>Edit Code Parameters</cite> is clicked the following option to edit the (mainly numerical) HESEL input parameters that cannot be determined from experimental data appears</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/hesel_kepler_HESEL__para.png" src="_images/hesel_kepler_HESEL__para.png" />
</td>
</tr>
<tr class="row-even"><td><p>The non-predetermined HESEL input parameters can be edited</p></td>
</tr>
</tbody>
</table>
<p>Where the descriptions of the parameters is given in <a class="reference internal" href="#hesel-input"><span class="std std-ref">HESEL input</span></a>.</p>
<p>When the input parameters for all actors of the workflow are set the HESEL EDGE TURBULENCE WORKFLOW is initated by pressing the green triangle button in the outermost workflow.</p>
<p>The output data are stored in the <cite>~/work/imasdb</cite> folder according to the structure described in <a class="reference internal" href="#hesel-output"><span class="std std-ref">HESEL output</span></a>.</p>
</section>
</section>
<section id="renate-documentation">
<h2><span class="section-number">6.2. </span>RENATE Documentation<a class="headerlink" href="#renate-documentation" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="eqreconstr.html" class="btn btn-neutral float-left" title="5. The EQRECONSTRUCT workflow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="codes.html" class="btn btn-neutral float-right" title="7. Codes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, WPCD.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>